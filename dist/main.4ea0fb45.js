!function(e){function n(n){for(var t,i,d=n[0],c=n[1],s=n[2],l=0,m=[];l<d.length;l++)i=d[l],r[i]&&m.push(r[i][0]),r[i]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(e[t]=c[t]);for(u&&u(n);m.length;)m.shift()();return o.push.apply(o,s||[]),a()}function a(){for(var e,n=0;n<o.length;n++){for(var a=o[n],t=!0,d=1;d<a.length;d++){var c=a[d];0!==r[c]&&(t=!1)}t&&(o.splice(n--,1),e=i(i.s=a[0]))}return e}var t={},r={1:0};var o=[];function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,n,a){i.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="./";var d=window.webpackJsonp=window.webpackJsonp||[],c=d.push.bind(d);d.push=n,d=d.slice();for(var s=0;s<d.length;s++)n(d[s]);var u=c;o.push([8,0]),a()}({5:function(e,n,a){"use strict";a.r(n);var t=a(0),r=a(4),o=a.n(r),i=a(3),d=a.n(i),c=a(2);var s=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2?arguments[2]:void 0,r=new t.BoxGeometry(n,n,n),o=new t.MeshPhongMaterial({color:a||Math.floor(16777215*Math.random()),transparent:!0,opacity:.9,wireframe:!0}),i=new t.Mesh(r,o);return i.position.copy(e),i};var u=function(e,n,a){var r=new t.Group,o=new t.GridHelper(e,n,"orange","blue");o.position.copy(a),o.material.opacity=.5,o.material.transparent=!0,r.add(o);var i=new t.PolarGridHelper(e/2,8,n/2,64,"green","red");return i.position.copy(a),i.material.opacity=.5,i.material.transparent=!0,r.add(i),r},l=function(e,n,a){var t=0,r=!0;return{update:function(o){!n>0||!r||(e((t+=o)/n%1),t>=n*a&&(this.update=function(){}))},setDuration:function(e){n=e},setRepetitions:function(e){a=e},pause:function(){r=!r}}},m={position:3,normal:3,uv:2};var f=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];var r=new t.BufferGeometry,o={};return["position","normal","uv"].forEach(function(e){var a=n.reduce(function(n,a){var t=a.getAttribute(e);return n+t.count*t.itemSize},0);o[e]=new Float32Array(a),n.reduce(function(n,a){var t=a.getAttribute(e).array;return t.forEach(function(a,t){o[e][n+t]=a}),n+t.length},0),r.addAttribute(e,new t.BufferAttribute(o[e],m[e]))}),r},p=a(1);function w(e){return function(e){if(Array.isArray(e)){for(var n=0,a=new Array(e.length);n<e.length;n++)a[n]=e[n];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}window.THREE=t,window.gui=new c.a.GUI({closeOnTop:!0,hideable:!1,width:350});var v=new d.a;document.body.appendChild(v.dom);var h=new t.Clock;window.scene=new t.Scene;var g=[];window.camera=new t.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e5),camera.position.set(-2e3,2100,0),window.renderer=new t.WebGLRenderer({antialias:!0}),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,document.body.appendChild(renderer.domElement),document.body.style.margin=0;var b=u(2e3,20,new t.Vector3(0,-25,0));scene.add(b),window.controls=new o.a(camera,renderer.domElement),controls.target.set(200,0,0),controls.enableKeys=!1,controls.autoUpdate=!1,controls.update();var y=new t.HemisphereLight("white","black",2);scene.add(y);var x=new t.PointLight("red",50,1e4);x.castShadow=!0,scene.add(x);var M=gui.addFolder("grids");M.add(b,"visible");var C=M.addFolder("rotation");C.add(b.rotation,"x",0,2*Math.PI,.1),C.add(b.rotation,"y",0,2*Math.PI,.1),C.add(b.rotation,"z",0,2*Math.PI,.1),window.objects=new t.Group,objects.name="objects",scene.add(objects);var D=new t.MeshStandardMaterial({color:"orange"}),j=new t.MeshStandardMaterial({color:"green"});function O(e){e.children.forEach(function(e){e.geometry&&e.geometry.dispose(),e.parent=null}),e.children.length=0}function z(){return Math.floor(16777215*Math.random())}gui.add({geometries:function(){var e=new t.SphereGeometry(50,16,16),n=new t.BoxGeometry(75,75,75);n.translate(25,25,25);var a=(new t.BufferGeometry).fromGeometry(e).toNonIndexed(),r=(new t.BufferGeometry).fromGeometry(n).toNonIndexed(),o=f(a,r);new t.Mesh(o,j).position.set(-100,100,-100);var i=new t.Geometry;i.merge(n),i.merge(e);var d={amount:100,addMergedBufferGeometries:function(){s(o,this.amount,objects,j)},addMergedGeometries:function(){s(i,this.amount,objects,D)},clearObjects:function(){O(objects)}},c=gui.addFolder("geometries");function s(e,n,a,r){var o,i=Array(n).fill().map(function(){var n=e.clone();return n.translate(Object(p.random)(-1e3,1e3),Object(p.random)(0,2e3),Object(p.random)(-1e3,1e3)),n});e.isBufferGeometry?o=f.apply(void 0,w(i)):(o=new t.Geometry,i.forEach(function(e){return o.merge(e)}));var d=new t.Mesh(o,r);d.castShadow=!0,d.receiveShadow=!0,a.add(d)}c.add(objects.children,"length").name("current amount").listen(),c.add(d,"amount",1,5e3,50).name("geometries to merge"),c.add(d,"addMergedBufferGeometries"),c.add(d,"addMergedGeometries"),c.add(d,"clearObjects"),c.open()}},"geometries").onChange(function(){this.remove()}),gui.add({rollerCoaster:function(){var e=new t.Group;scene.add(e);var n=new Array(10).fill().map(function(){return new t.Vector3(Object(p.random)(-1e3,1e3),Object(p.random)(0,2e3),Object(p.random)(-1e3,1e3))}),a=new t.CatmullRomCurve3(n,!0),r=a.getPoints(3e3),o=(new t.BufferGeometry).setFromPoints(r),i=new t.Line(o,new t.LineBasicMaterial({color:"orange",linewidth:2})),d=new t.TubeGeometry(a,900,4,8,!0),c=new t.Mesh(d,new t.MeshPhongMaterial({color:z()}));e.add(i),e.add(c);var u=s(a.getPointAt(0));e.add(u);var m={position:0,timePerLoop:30,enabled:!0,cameraTracking:!0,applyTrackingOffset:"matrix",cameraLookAt:!0},f=function(e){m.position=e,u.position.copy(a.getPointAt(e));var n=a.getPointAt((e+1e-4)%1);u.lookAt(n)};window.cubeMovementMixer=new l(function(e){m.enabled&&f(e),m.cameraTracking&&function(e){var n=a.getPointAt(e).clone(),r=new t.Vector3(-100,150,-100),o=n.add(r);if("matrix"==m.applyTrackingOffset&&o.applyMatrix4(u.matrixWorld),"quaternion"==m.applyTrackingOffset&&o.applyQuaternion(u.getWorldQuaternion()),"lerp"==m.applyTrackingOffset){var i=o.clone().applyMatrix4(u.matrixWorld),d=o.clone().applyQuaternion(u.getWorldQuaternion());o.copy(i.lerp(d,.5))}camera.position.copy(o),controls.update()}(e),m.cameraLookAt&&camera.lookAt(u.position)},30,1/0);var w=gui.addFolder("rollerCoaster"),v=w.addFolder("wagon");v.addColor({color:u.material.color.getHex()},"color").name("color").onChange(function(e){u.material.color=new t.Color(e)}),v.addColor({color:u.material.emissive.getHex()},"color").name("emissive").onChange(function(e){u.material.emissive=new t.Color(e)}),v.add(u.material,"wireframe");var h=v.addFolder("motion");h.add(m,"position",0,.9999,.001).onChange(function(e){f(e)}).listen(),h.add(m,"timePerLoop",0,60,.5).onChange(function(e){cubeMovementMixer.setDuration(e)}),h.add(m,"enabled").onChange(function(){cubeMovementMixer.pause()});var b=w.addFolder("camera");b.add(m,"cameraLookAt").onChange(function(){}),b.add(m,"cameraTracking"),b.add(m,"applyTrackingOffset",["none","matrix","quaternion","lerp"]);var y=w.addFolder("railway");y.add(c.material,"wireframe"),y.add(c,"visible").name("visible"),y.add(i,"visible").name("visible core"),y.addColor({color:c.material.color.getHex()},"color").name("color").onChange(function(e){c.material.color=new t.Color(e)}),g.push(cubeMovementMixer)}},"rollerCoaster").onChange(function(){this.remove()});var P=function(e,n){return{update:function(a){var t=n.clone().multiplyScalar(a);e.userData.speed.add(t)}}},k=function(e,n){return{update:function(a){var t=n.clone().multiplyScalar(a);e.userData.rotation&&t.applyAxisAngle({x:0,y:1,z:0},e.userData.rotation),e.position.add(t)}}};function G(){var e=s({x:0,y:0,z:0},50);e.userData.speed=new t.Vector3(0,0,0),e.userData.acceleration=new t.Vector3(0,0,0),e.userData.speedMixer=new k(e,e.userData.speed),e.userData.accelerationMixer=new P(e,e.userData.acceleration),g.push(e.userData.accelerationMixer),g.push(e.userData.speedMixer),scene.add(e);var n=300,a=.05,r="speed",o={w:{axis:"x",direction:1,opposite:"s",movement:!0},s:{axis:"x",direction:-1,opposite:"w",movement:!0},a:{axis:"z",direction:-1,opposite:"d",movement:!0},d:{axis:"z",direction:1,opposite:"a",movement:!0},e:{axis:"y",direction:-1,opposite:"q",rotation:!0},q:{axis:"y",direction:1,opposite:"e",rotation:!0}},i={};function d(){Object.keys(i).forEach(function(n){var t=o[n];if(t.rotation){var r=i[n]&&i[t.opposite],d=!(i[n]||i[t.opposite]);r||d||i[n]&&(e.rotation[t.axis]+=a*t.direction,e.userData.rotation=e.rotation[t.axis])}})}function c(){var a=Object.keys(i).filter(function(e){return o[e].movement&&!0===i[e]}).length;Object.keys(i).forEach(function(t){var d=o[t];if(d.movement){var c=i[t]&&i[d.opposite],s=!(i[t]||i[d.opposite]);c||s?e.userData[r][d.axis]=0:i[t]&&(e.userData[r][d.axis]=n/a*d.direction)}})}var u={},m=new t.Group;scene.add(m);var f=new t.Group;scene.add(f);var w={drawProbes:!0,tileSize:500};function v(e){var n=e.x,a=e.z;return{x:Math.floor(n/w.tileSize),z:Math.floor(a/w.tileSize),y:0}}function h(e){var n=v(e),a=n.x,t=n.z;return"".concat(a,"-").concat(t)}function b(e){var n,a,r,o=new t.PlaneBufferGeometry(w.tileSize,w.tileSize),i=new t.Mesh(o,new t.MeshStandardMaterial({color:z(),side:t.DoubleSide}));return i.rotation.x=Math.PI/2,i.position.copy((n=v(e),a=n.x,r=n.z,new t.Vector3(w.tileSize/2,0,w.tileSize/2).add({x:a*w.tileSize,z:r*w.tileSize,y:-25}))),i}function y(n){var a=new t.Vector3(1,0,0).multiplyScalar(n);Object(p.times)(16,function(n){var t=2*Math.PI/16*n,r=a.clone();r.applyAxisAngle({x:0,y:1,z:0},t);var o=r.add(e.position);if(u[h(o)]||function(e){var n=b(e);u[h(e)]=!0,f.add(n)}(o),w.drawProbes){var i=s(o,5);m.add(i)}})}gui.add(w,"drawProbes").onChange(function(){O(m)}),gui.add(w,"tileSize",100,2e3,10).onChange(function(){O(f),u={}});var x=new l(Object(p.throttle)(function(e){w.drawProbes&&O(m),Object(p.times)(2,function(e){return y(w.tileSize*(e+2)*.6)})},200),1,1/0);g.push(x),document.addEventListener("keydown",function(e){if("BODY"===e.target.nodeName){var n=e.key.toLowerCase();o[n]&&(i[n]=!0,c(),d())}}),document.addEventListener("keyup",function(e){var n=e.key.toLowerCase();o[n]&&(i[n]=!1,c(),d())}),document.body.focus(),gui.add({wasd:function(){document.body.focus()}},"wasd").name("recover focus");var M={firstPerson:!1,originalCameraPosition:{},originalCameraRotation:{}};gui.add(M,"firstPerson").onChange(function(n){n?(M.originalCameraPosition=camera.position.clone(),M.originalCameraRotation=camera.rotation.clone(),controls.reset(),controls.enabled=!1,e.add(camera),camera.position.set(0,0,0),camera.rotation.y=-Math.PI/2):(e.remove(camera),controls.enabled=!0,camera.position.copy(M.originalCameraPosition),camera.rotation.copy(M.originalCameraRotation))})}gui.add({kinematics:function(){function e(e){var n=s({x:0,y:0,z:0});if(scene.add(n),n.userData.speed=new t.Vector3(Object(p.random)(-10,10),Object(p.random)(0,10),Object(p.random)(-10,10)),n.userData.acceleration=new t.Vector3(Object(p.random)(-100,100),Object(p.random)(0,100),Object(p.random)(-100,100)),n.userData.speedMixer=new k(n,n.userData.speed),n.userData.accelerationMixer=new P(n,n.userData.acceleration),g.push(n.userData.accelerationMixer),g.push(n.userData.speedMixer),e){var a=o.addFolder("cube ".concat(n.id)),r=a.addFolder("position");r.add(n.position,"x").listen(),r.add(n.position,"y").listen(),r.add(n.position,"z").listen();var i=a.addFolder("speed");i.add(n.userData.speed,"x").listen(),i.add(n.userData.speed,"y").listen(),i.add(n.userData.speed,"z").listen(),i.add({reflect:function(){n.userData.speed.reflect(n.position.clone().normalize())}},"reflect");var d=a.addFolder("acceleration");d.add(n.userData.acceleration,"x").listen(),d.add(n.userData.acceleration,"y").listen(),d.add(n.userData.acceleration,"z").listen(),d.add({reflect:function(){n.userData.acceleration.reflect(n.position.clone().normalize())}},"reflect"),n.userData.guiFolder=a}return n}var n=new t.Group;scene.add(n);var a=gui.addFolder("kinematics"),r={amount:50,tracked:!1,addCube:function(){n.add(e(this.tracked))},addCubes:function(){var a=this;Object(p.times)(this.amount,function(){n.add(e(a.tracked))})},clearCubes:function(){n.children.forEach(function(e){e.userData.guiFolder&&o.removeFolder(e.userData.guiFolder),Object(p.remove)(g,e.userData.speedMixer),Object(p.remove)(g,e.userData.accelerationMixer)}),O(n)}};a.add(r,"addCube"),a.add(r,"amount",5,200,5),a.add(r,"addCubes"),a.add(r,"clearCubes"),a.add(r,"tracked"),a.add({reflect:function(){n.children.forEach(function(e){e.userData.speed.reflect(e.position.clone().normalize()),e.userData.acceleration.reflect(e.position.clone().normalize())})}},"reflect");var o=a.addFolder("cubes")}},"kinematics").onChange(function(){this.remove()}),gui.add({wasd:G},"wasd").onChange(function(){this.remove()}),setTimeout(G,100),gui.add({texts:function(){var e=document.createElement("textarea");e.autocomplete="off",document.body.appendChild(e),e.focus();var n={height:100,line:120,showBoxes:!1,followCamera:!0},a=gui.addFolder("text");a.add(n,"height",50,200),a.add(n,"line",50,200),a.add(n,"showBoxes"),a.add(n,"followCamera");var r=new t.Group;r.name="texts",scene.add(r),(new t.FontLoader).load("./assets/fonts/Luis2_Medium.json",function(a){var o=Object(p.debounce)(function(e){r.traverse(function(e){e.isMesh&&e.geometry.dispose()}),r.children.length=0;var o=e.target.value.split(/\n/);o.forEach(function(e,i){var d=new t.TextGeometry(e,{font:a,size:n.height,height:5,bevelEnabled:!0,bevelThickness:5,bevelSize:3});d.center();var c=new t.Mesh(d,D);if(c.name=e,n.showBoxes){var s=new t.BoxHelper(c);c.add(s)}c.position.set(0,-n.line*i,0),r.add(c),r.position.set(0,(o.length-1)*n.line/2,0)})},500);e.addEventListener("input",o,!1)});var o={update:function(){n.followCamera&&r.children.forEach(function(e){e.lookAt(camera.position)})}};g.push(o)}},"texts").onChange(function(){this.remove()}),window.addEventListener("resize",function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}),function e(){v.begin(),requestAnimationFrame(e);var n=h.getDelta();g.forEach(function(e){return e.update(n)}),renderer.render(scene,camera),v.end()}()},8:function(e,n,a){e.exports=a(5)}});