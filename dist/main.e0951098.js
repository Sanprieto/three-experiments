!function(e){function n(n){for(var o,i,d=n[0],c=n[1],l=n[2],u=0,m=[];u<d.length;u++)i=d[u],t[i]&&m.push(t[i][0]),t[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);for(s&&s(n);m.length;)m.shift()();return a.push.apply(a,l||[]),r()}function r(){for(var e,n=0;n<a.length;n++){for(var r=a[n],o=!0,d=1;d<r.length;d++){var c=r[d];0!==t[c]&&(o=!1)}o&&(a.splice(n--,1),e=i(i.s=r[0]))}return e}var o={},t={1:0};var a=[];function i(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=o,i.d=function(e,n,r){i.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="./";var d=window.webpackJsonp=window.webpackJsonp||[],c=d.push.bind(d);d.push=n,d=d.slice();for(var l=0;l<d.length;l++)n(d[l]);var s=c;a.push([8,0]),r()}({5:function(e,n,r){"use strict";r.r(n);var o=r(0),t=r(4),a=r.n(t),i=r(3),d=r.n(i),c=r(2);var l=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2?arguments[2]:void 0,t=new o.BoxGeometry(n,n,n),a=new o.MeshPhongMaterial({color:r||Math.floor(16777215*Math.random()),transparent:!0,opacity:.9,wireframe:!0}),i=new o.Mesh(t,a);return i.position.copy(e),i};var s=function(e,n,r){var t=new o.Group,a=new o.GridHelper(e,n,"orange","blue");a.position.copy(r),a.material.opacity=.5,a.material.transparent=!0,t.add(a);var i=new o.PolarGridHelper(e/2,8,n/2,64,"green","red");return i.position.copy(r),i.material.opacity=.5,i.material.transparent=!0,t.add(i),t},u=function(e,n,r){var o=0,t=!0;return{update:function(a){!n>0||!t||(e((o+=a)/n%1),o>=n*r&&(this.update=function(){}))},setDuration:function(e){n=e},setRepetitions:function(e){r=e},pause:function(){t=!t}}},m={position:3,normal:3,uv:2};var p=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var t=new o.BufferGeometry,a={};return["position","normal","uv"].forEach(function(e){var r=n.reduce(function(n,r){var o=r.getAttribute(e);return n+o.count*o.itemSize},0);a[e]=new Float32Array(r),n.reduce(function(n,r){var o=r.getAttribute(e).array;return o.forEach(function(r,o){a[e][n+o]=r}),n+o.length},0),t.addAttribute(e,new o.BufferAttribute(a[e],m[e]))}),t},f=r(1);function h(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}window.THREE=o,window.gui=new c.a.GUI({closeOnTop:!0,hideable:!1,width:350});var w=new d.a;document.body.appendChild(w.dom);var v=new o.Clock;window.scene=new o.Scene;var g=[];window.camera=new o.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e4),camera.position.set(2500,4100,2300),window.renderer=new o.WebGLRenderer({antialias:!0}),renderer.setSize(window.innerWidth,window.innerHeight),renderer.shadowMap.enabled=!0,document.body.appendChild(renderer.domElement),document.body.style.margin=0;var b=s(2e3,20,new o.Vector3(0,-100,0));scene.add(b),window.controls=new a.a(camera,renderer.domElement),controls.target.set(-200,0,-200),controls.enableKeys=!1,controls.autoUpdate=!1;var y=new o.HemisphereLight("white","black",2);scene.add(y);var M=new o.PointLight("red",50,1e4);M.castShadow=!0,scene.add(M);var x=gui.addFolder("grids");x.add(b,"visible");var C=x.addFolder("rotation");C.add(b.rotation,"x",0,2*Math.PI,.1),C.add(b.rotation,"y",0,2*Math.PI,.1),C.add(b.rotation,"z",0,2*Math.PI,.1),window.objects=new o.Group,objects.name="objects",scene.add(objects);var P=new o.MeshStandardMaterial({color:"orange"}),j=new o.MeshStandardMaterial({color:"green"});function A(){return Math.floor(16777215*Math.random())}gui.add({geometries:function(){var e=new o.SphereGeometry(50,16,16),n=new o.BoxGeometry(75,75,75);n.translate(25,25,25);var r=(new o.BufferGeometry).fromGeometry(e).toNonIndexed(),t=(new o.BufferGeometry).fromGeometry(n).toNonIndexed(),a=p(r,t);new o.Mesh(a,j).position.set(-100,100,-100);var i=new o.Geometry;i.merge(n),i.merge(e);var d={amount:100,addMergedBufferGeometries:function(){l(a,this.amount,objects,j)},addMergedGeometries:function(){l(i,this.amount,objects,P)},clearObjects:function(){var e;(e=objects).children.forEach(function(e){e.geometry&&e.geometry.dispose(),e.parent=null}),e.children.length=0}},c=gui.addFolder("geometries");function l(e,n,r,t){var a,i=Array(n).fill().map(function(){var n=e.clone();return n.translate(Object(f.random)(-1e3,1e3),Object(f.random)(0,2e3),Object(f.random)(-1e3,1e3)),n});e.isBufferGeometry?a=p.apply(void 0,h(i)):(a=new o.Geometry,i.forEach(function(e){return a.merge(e)}));var d=new o.Mesh(a,t);d.castShadow=!0,d.receiveShadow=!0,r.add(d)}c.add(objects.children,"length").name("current amount").listen(),c.add(d,"amount",1,5e3,50).name("geometries to merge"),c.add(d,"addMergedBufferGeometries"),c.add(d,"addMergedGeometries"),c.add(d,"clearObjects"),c.open()}},"geometries").onChange(function(){this.remove()}),gui.add({rollerCoaster:function(){var e=new o.Group;scene.add(e);var n=new Array(10).fill().map(function(){return new o.Vector3(Object(f.random)(-1e3,1e3),Object(f.random)(0,2e3),Object(f.random)(-1e3,1e3))}),r=new o.CatmullRomCurve3(n,!0),t=r.getPoints(3e3),a=(new o.BufferGeometry).setFromPoints(t),i=new o.Line(a,new o.LineBasicMaterial({color:"orange",linewidth:2})),d=new o.TubeGeometry(r,900,4,8,!0),c=new o.Mesh(d,new o.MeshPhongMaterial({color:A()}));e.add(i),e.add(c);var s=l(r.getPointAt(0));e.add(s);var m=function(e,n,r){console.log(e);var t=e.clone(),a=(new o.BufferGeometry).setFromPoints(t.getPoints(3e3)),i=new o.Line(a,new o.LineBasicMaterial({color:"green"})),d=function(n,r){t.points=e.getPoints(n).map(function(e){var n=new o.Vector3(Object(f.random)(-r,r),Object(f.random)(-r,r),Object(f.random)(-r,r));return e.add(n)}),a.setFromPoints(t.getPoints(3e3)),i.material.color.set(A())};return d(n,r),{phantomRailCurve:t,phantomSpline:i,divertPhantomCurve:d}}(r,20,100),p=m.phantomSpline,h=m.phantomRailCurve,w=m.divertPhantomCurve;p.visible=!1,e.add(p);var v=l(h.getPointAt(0));v.visible=!1,e.add(v);var b=new u(function(e){v.position.copy(h.getPointAt(e))},30,1/0);g.push(b);var y={position:0,timePerLoop:30,enabled:!0,cameraTracking:!0,applyTrackingOffset:"phantom",cameraLookAt:!0},M=function(e){y.position=e,s.position.copy(r.getPointAt(e));var n=r.getPointAt((e+1e-4)%1);s.lookAt(n)};window.cubeMovementMixer=new u(function(e){y.enabled&&M(e),y.cameraTracking&&function(e){var n=r.getPointAt(e).clone(),t=new o.Vector3(-100,150,-100),a=n.add(t);if("matrix"==y.applyTrackingOffset&&a.applyMatrix4(s.matrixWorld),"quaternion"==y.applyTrackingOffset&&a.applyQuaternion(s.getWorldQuaternion()),"lerp"==y.applyTrackingOffset){var i=a.clone().applyMatrix4(s.matrixWorld),d=a.clone().applyQuaternion(s.getWorldQuaternion());a.copy(i.lerp(d,.5))}"phantom"==y.applyTrackingOffset&&(a=h.getPointAt(e)),camera.position.copy(a),controls.update()}(e),y.cameraLookAt&&camera.lookAt(s.position)},30,1/0);var x=gui.addFolder("rollerCoaster"),C=x.addFolder("wagon");C.addColor({color:s.material.color.getHex()},"color").name("color").onChange(function(e){s.material.color=new o.Color(e)}),C.addColor({color:s.material.emissive.getHex()},"color").name("emissive").onChange(function(e){s.material.emissive=new o.Color(e)}),C.add(s.material,"wireframe");var P=C.addFolder("motion");P.add(y,"position",0,.9999,.001).onChange(function(e){M(e)}).listen(),P.add(y,"timePerLoop",0,60,.5).onChange(function(e){cubeMovementMixer.setDuration(e),b.setDuration(e)}),P.add(y,"enabled").onChange(function(){cubeMovementMixer.pause(),b.pause()});var j=x.addFolder("camera");j.add(y,"cameraLookAt").onChange(function(){}),j.add(y,"cameraTracking"),j.add(y,"applyTrackingOffset",["none","matrix","quaternion","lerp","phantom"]);var G={divertedPoints:20,diversion:100},O=j.addFolder("phantom settings");O.add(p,"visible").name("railway"),O.add(v,"visible").name("camera helper"),O.add(G,"divertedPoints",2,200,1).onChange(function(){w(G.divertedPoints,G.diversion)}),O.add(G,"diversion",2,2e3,1).onChange(function(){w(G.divertedPoints,G.diversion)});var k=x.addFolder("railway");k.add(c.material,"wireframe"),k.add(c,"visible").name("visible"),k.add(i,"visible").name("visible core"),k.addColor({color:c.material.color.getHex()},"color").name("color").onChange(function(e){c.material.color=new o.Color(e)}),g.push(cubeMovementMixer)}},"rollerCoaster").onChange(function(){this.remove()}),gui.add({texts:function(){var e=document.createElement("textarea");e.autocomplete="off",document.body.appendChild(e),e.focus();var n={height:100,line:120,showBoxes:!1,followCamera:!0},r=gui.addFolder("text");r.add(n,"height",50,200),r.add(n,"line",50,200),r.add(n,"showBoxes"),r.add(n,"followCamera");var t=new o.Group;t.name="texts",scene.add(t),(new o.FontLoader).load("./assets/fonts/Luis2_Medium.json",function(r){var a=Object(f.debounce)(function(e){t.traverse(function(e){e.isMesh&&e.geometry.dispose()}),t.children.length=0;var a=e.target.value.split(/\n/);a.forEach(function(e,i){var d=new o.TextGeometry(e,{font:r,size:n.height,height:5,bevelEnabled:!0,bevelThickness:5,bevelSize:3});d.center();var c=new o.Mesh(d,P);if(c.name=e,n.showBoxes){var l=new o.BoxHelper(c);c.add(l)}c.position.set(0,-n.line*i,0),t.add(c),t.position.set(0,(a.length-1)*n.line/2,0)})},500);e.addEventListener("input",a,!1)});var a={update:function(){n.followCamera&&t.children.forEach(function(e){e.lookAt(camera.position)})}};g.push(a)}},"texts").onChange(function(){this.remove()}),window.addEventListener("resize",function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}),function e(){w.begin(),requestAnimationFrame(e);var n=v.getDelta();g.forEach(function(e){return e.update(n)}),renderer.render(scene,camera),w.end()}()},8:function(e,n,r){e.exports=r(5)}});